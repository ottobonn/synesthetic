(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(30)},24:function(e,t,n){},26:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(9),i=n.n(a),r=n(14),s=n.n(r),c=(n(24),n(1)),o=n(2),u=n(5),h=n(3),l=n(4),f=(n(26),n(15)),v=n(17),m=n(0),d=n(40),w=n(36),p=n(37),y=n(39),g=n(41),b=n(38),S=n(34),j=n(33),k=function(){function e(t){var n=t.scene;Object(c.a)(this,e);for(var a=[],i=0;i<100;i++){var r=new m.u,s=-Math.PI/2,o=2*Math.PI/100,u=s+o*i+.001,h=u+(o-.002);r.absarc(0,0,.5,h,u,!0),r.absarc(0,0,1,u,h,!1);var l=new m.f(r,{depth:.2,steps:1,bevelEnabled:!1,curveSegments:50}),f=new m.k({color:16777215}),v=new m.j(l,f);n.add(v),a.push(v)}this.slices=a}return Object(o.a)(e,[{key:"animate",value:function(e){var t=e.spectrum;if(t.length){var n=this.slices.length,a=Math.floor(t.length/n);this.slices.forEach(function(e,n){var i=Math.max(Math.log(10*t[n*a]),.001);e.scale.x=i,e.scale.y=i})}}}]),e}(),O=function(){function e(t){var n=t.scene;Object(c.a)(this,e);for(var a=new m.g,i=new m.p({color:16777215,size:.05,map:(new m.w).load("/assets/textures/particle.png"),blending:m.a,transparent:!0}),r=new m.v(new m.A(0,0,0),10),s=function(){return m.i.mapLinear(Math.random(),0,1,-10,10)};a.vertices.length<2e3;){var o=s(),u=s(),h=s(),l=new m.A(o,u,h);if(r.containsPoint(l)){var f=l.clone().divideScalar(l.length());l.heading=f,a.vertices.push(l)}}this.particleSystem=new m.o(a,i),n.add(this.particleSystem),this.boundingSphere=r}return Object(o.a)(e,[{key:"animate",value:function(e){var t=e.rms;this.particleSystem.rotation.y+=1e-4;var n=this.particleSystem.geometry,a=!0,i=!1,r=void 0;try{for(var s,c=n.vertices[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var o=s.value;o.add(o.heading.clone().multiplyScalar(t)),this.boundingSphere.containsPoint(o)||o.set(0,0,0)}}catch(u){i=!0,r=u}finally{try{a||null==c.return||c.return()}finally{if(i)throw r}}this.particleSystem.geometry.verticesNeedUpdate=!0}}]),e}(),M=function(){function e(t){var n=t.effect,a=t.modulator;Object(c.a)(this,e),this.effect=n,this.modulator=a||function(){}}return Object(o.a)(e,[{key:"animate",value:function(e){this.modulator(this.effect,e)}}]),e}(),A=function(){function e(t){var n=t.canvas;Object(c.a)(this,e);var a=new m.s,i=new m.m(76,1,.1,1e3),r=n.getContext("webgl2"),s=new m.C({canvas:n,context:r,antialias:!0});this.effectModulators=[new M({effect:new d.a}),new M({effect:new w.a,modulator:function(e,t){var n=t.rms,a=new m.z(0,0),i=new m.z(.05,.05),r=a.lerp(i,n);e.offset=r}}),new M({effect:new p.a})];var o=this.effectModulators.map(function(e){return e.effect}),u=new y.a(s),h=[new g.a(a,i),Object(f.a)(b.a,[i].concat(Object(v.a)(o))),new S.a({kernelSize:j.b.VERY_SMALL})];h[h.length-1].renderToScreen=!0,h.map(u.addPass.bind(u)),this.composer=u,this.clock=new m.b,this.canvas=n,this.scene=a,this.camera=i,this.renderer=s,i.position.z=5,this.visualizers=[new k({scene:a}),new O({scene:a})]}return Object(o.a)(e,[{key:"animate",value:function(e){var t=e.width,n=e.height;t===this.lastWidth&&n===this.lastHeight||(this.composer.setSize(t,n),this.renderer.setSize(t,n),this.camera.aspect=t/n,this.camera.updateProjectionMatrix(),this.lastWidth=t,this.lastHeight=n),this.visualizers.forEach(function(t){return t.animate(e)}),this.effectModulators.forEach(function(t){return t.animate(e)}),this.composer.render(this.scene,this.camera)}}]),e}(),z=n(12),E=n.n(z),x=n(16),D=function(){function e(){var t=this;Object(c.a)(this,e),this.getAudioAnalyser().then(function(e){return t.analyser=e})}return Object(o.a)(e,[{key:"getAudioAnalyser",value:function(){var e=Object(x.a)(E.a.mark(function e(){var t,n,a,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:return t=e.sent,n=new AudioContext,a=n.createMediaStreamSource(t),(i=n.createAnalyser()).fftSize=512,a.connect(i),e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getSpectrum",value:function(){var e=[];this.analyser&&(e=new Uint8Array(this.analyser.frequencyBinCount),this.analyser.getByteFrequencyData(e));var t=new Array(e.length);return e.forEach(function(e,n){return t[n]=e/255}),{spectrum:t}}},{key:"getWave",value:function(){var e=[];this.analyser&&(e=new Uint8Array(this.analyser.frequencyBinCount),this.analyser.getByteTimeDomainData(e));var t=new Array(e.length);e.forEach(function(e,n){return t[n]=e/255});var n=t.length,a=t.reduce(function(e,t){return e+Math.pow(t-.5,2)},0),i=n?Math.sqrt(a/n):0;return{wave:t,rms:i}}}]),e}(),q=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).canvasRef=i.a.createRef(),n.state={width:1,height:1},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("canvas",{id:"main",ref:this.canvasRef})}},{key:"updateDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"componentDidMount",value:function(){var e=this;this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this));var t=new D,n=new A({canvas:this.canvasRef.current});!function a(){e.animationFrameRequest=requestAnimationFrame(a);var i=t.getSpectrum().spectrum,r=t.getWave(),s=r.wave,c=r.rms;n.animate({spectrum:i,wave:s,rms:c,width:e.state.width,height:e.state.height})}()}},{key:"componentWillUnmount",value:function(){this.animationFrameRequest&&cancelAnimationFrame(this.animationFrameRequest),window.removeEventListener("resize",this.updateDimensions.bind(this))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,2,1]]]);
//# sourceMappingURL=main.f7b753f1.chunk.js.map