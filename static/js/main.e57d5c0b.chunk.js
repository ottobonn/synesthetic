(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(30)},24:function(e,t,n){},26:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(9),i=n.n(a),r=n(14),s=n.n(r),o=(n(24),n(1)),c=n(2),u=n(5),h=n(3),v=n(4),m=(n(26),n(15)),l=n(17),f=n(0),d=n(40),w=n(36),p=n(37),g=n(39),y=n(41),b=n(38),j=n(34),O=n(33),S=function(){function e(t){var n=t.startAngle,a=void 0===n?0:n;Object(o.a)(this,e),this.numControlPoints=10,this.numCurvePoints=100;for(var i=[],r=0;r<this.numControlPoints;r++){var s=new f.F,c=a+2*Math.PI*r/this.numControlPoints;s.direction=new f.F(Math.cos(c),Math.sin(c),0),i.push(s)}var u=new f.c(i,!0),h=u.getPoints(this.numCurvePoints),v=(new f.b).setFromPoints(h),m=new f.l({color:16777215,linewidth:3}),l=new f.k(v,m);this.curve=u,this.curveObject=l}return Object(c.a)(e,[{key:"animate",value:function(e){for(var t=e.spectrum,n=Math.floor(t.length/this.numCurvePoints),a=0;a<this.curve.points.length;a++){var i=t[a*n],r=this.curve.points[a],s=r.direction.clone().multiplyScalar(f.n.mapLinear(i,0,1,0,2));r.set(s.x,s.y,s.z)}this.curveObject.geometry.setFromPoints(this.curve.getPoints(this.numCurvePoints)),this.curveObject.geometry.verticesNeedUpdate=!0}},{key:"getSceneObject",value:function(){return this.curveObject}}]),e}(),k=function(){function e(t){var n=t.scene;Object(o.a)(this,e),this.numCurves=10,this.radius=1.2,this.treadmillSpeed=.1,this.curves=[],this.group=new f.j;for(var a=0;a<this.numCurves;a++){var i=new S({scene:n,startAngle:0});i.getSceneObject().position.z=f.n.lerp(-this.radius,this.radius,a/this.numCurves),this.curves.push(i),this.group.add(i.getSceneObject())}this.group.rotateX(Math.PI/2),n.add(this.group)}return Object(c.a)(e,[{key:"animate",value:function(e){var t=this,n=e.spectrum,a=e.clockDelta;n.length&&(this.curves.forEach(function(e){e.animate({spectrum:n});var i=e.getSceneObject().position,r=i.x,s=i.y,o=i.z,c=(t.radius+o+a*t.treadmillSpeed)%(2*t.radius)-t.radius;e.getSceneObject().position.set(r,s,c);var u=e.getSceneObject().position;r=u.x,s=u.y,o=u.z;var h=Math.max(Math.sqrt(Math.pow(t.radius,2)-Math.pow(o,2))/t.radius,.01);e.getSceneObject().scale.set(h,h,1)}),this.group.rotateX(.1*a),this.group.rotateY(.1*a))}}]),e}(),M=function(){function e(t){var n=t.effect,a=t.modulator;Object(o.a)(this,e),this.effect=n,this.modulator=a||function(){}}return Object(c.a)(e,[{key:"animate",value:function(e){this.modulator(this.effect,e)}}]),e}(),A=function(){function e(t){var n=t.canvas;Object(o.a)(this,e);var a=new f.x,i=new f.r(76,1,.1,1e3),r=n.getContext("webgl2"),s=new f.H({canvas:n,context:r,antialias:!0});this.effectModulators=[new M({effect:new d.a}),new M({effect:new w.a,modulator:function(e,t){var n=t.rms,a=new f.E(0,0),i=new f.E(.05,.05),r=a.lerp(i,n);e.offset=r}}),new M({effect:new p.a})];var c=this.effectModulators.map(function(e){return e.effect}),u=new g.a(s),h=[new y.a(a,i),Object(m.a)(b.a,[i].concat(Object(l.a)(c))),new j.a({kernelSize:O.b.VERY_SMALL})];h[h.length-1].renderToScreen=!0,h.map(u.addPass.bind(u)),this.composer=u,this.clock=new f.d,this.canvas=n,this.scene=a,this.camera=i,this.renderer=s,i.position.z=5,this.visualizers=[new k({scene:a})]}return Object(c.a)(e,[{key:"animate",value:function(e){var t=e.width,n=e.height;t===this.lastWidth&&n===this.lastHeight||(this.composer.setSize(t,n),this.renderer.setSize(t,n),this.camera.aspect=t/n,this.camera.updateProjectionMatrix(),this.lastWidth=t,this.lastHeight=n),e.clockDelta=this.clock.getDelta(),this.visualizers.forEach(function(t){return t.animate(e)}),this.effectModulators.forEach(function(t){return t.animate(e)}),this.composer.render(this.scene,this.camera)}}]),e}(),C=n(12),P=n.n(C),z=n(16),W=function(){function e(){var t=this;Object(o.a)(this,e),this.emptyArray=[],this.getAudioAnalyser().then(function(e){t.analyser=e,t.rawSpectrum=new Uint8Array(t.analyser.frequencyBinCount),t.spectrum=new Array(t.rawSpectrum.length),t.rawWave=new Uint8Array(t.analyser.frequencyBinCount),t.wave=new Array(t.rawWave.length)})}return Object(c.a)(e,[{key:"getAudioAnalyser",value:function(){var e=Object(z.a)(P.a.mark(function e(){var t,n,a,i;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:return t=e.sent,n=new AudioContext,a=n.createMediaStreamSource(t),(i=n.createAnalyser()).fftSize=256,a.connect(i),e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getSpectrum",value:function(){var e,t=this;return this.analyser?(this.analyser.getByteFrequencyData(this.rawSpectrum),this.rawSpectrum.forEach(function(e,n){return t.spectrum[n]=e/255}),e=this.spectrum):e=this.emptyArray,{spectrum:e}}},{key:"getWave",value:function(){var e,t;if(this.analyser){this.analyser.getByteTimeDomainData(this.rawWave);for(var n=this.rawWave.length,a=0,i=0;i<n;i++){var r=this.rawWave[i]/255;this.wave[i]=r,a+=Math.pow(r-.5,2)}e=this.wave,t=Math.sqrt(a/n)}else e=this.emptyArray,t=0;return{wave:e,rms:t}}}]),e}(),x=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).canvasRef=i.a.createRef(),n.state={width:1,height:1},n}return Object(v.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("canvas",{id:"main",ref:this.canvasRef})}},{key:"updateDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"componentDidMount",value:function(){var e=this;this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this));var t=new W,n=new A({canvas:this.canvasRef.current});!function a(){e.animationFrameRequest=requestAnimationFrame(a);var i=t.getSpectrum().spectrum,r=t.getWave(),s=r.wave,o=r.rms;n.animate({spectrum:i,wave:s,rms:o,width:e.state.width,height:e.state.height})}()}},{key:"componentWillUnmount",value:function(){this.animationFrameRequest&&cancelAnimationFrame(this.animationFrameRequest),window.removeEventListener("resize",this.updateDimensions.bind(this))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,2,1]]]);
//# sourceMappingURL=main.e57d5c0b.chunk.js.map